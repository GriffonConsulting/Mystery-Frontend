import{f as E,j as t,a as I,r as m,c as T,u as F,b as L,C as U,B as f,T as g,i as a,d as V,L as A,e as M}from"./index-Bapmzi_e.js";import{L as W}from"./LockOutlined-CyGrtiXa.js";import{c as q,a as j}from"./index.esm-Bo-n_X_o.js";import{A as z,T as w,F as B}from"./TextField-yOJyOGIO.js";import{G as n}from"./Grid-Bbuccjoe.js";import{I as D,a as O,F as P,C as $}from"./InputAdornment-DntiXLcc.js";const G=E(t.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),H=E(t.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff"),X=()=>{const b=I(),[l,d]=m.useState({marketingEmail:!1}),[C,p]=m.useState(!1),[i,c]=m.useState([]),[u,y]=m.useState(!1),k=T(),[,S]=F(["token"]),r=L(),h=q({email:j().required("emailError").email("emailError"),password:j().matches(/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*\W)(?!.* ).{8,}$/,"passwordError").required("passwordError")}),v=async()=>{if(c([]),!await h.isValid(l)){await h.validate(l,{abortEarly:!1}).catch(e=>c(e.errors));return}p(!0),M.authenticate.signUp(l).then(e=>{var s,o;S("token",e.data.result,{sameSite:!0,secure:!0,path:"/"}),b((s=r==null?void 0:r.state)!=null&&s.from?(o=r==null?void 0:r.state)==null?void 0:o.from:"/account")}).catch(e=>{var o,x;const s=(o=e==null?void 0:e.response)==null?void 0:o.data;(x=e==null?void 0:e.response)!=null&&x.data&&c(s.split(";")),p(!1)})};return t.jsx(U,{maxWidth:"xs",children:t.jsxs(f,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(z,{sx:{m:1,bgcolor:"primary.main"},children:t.jsx(W,{})}),t.jsx(g,{component:"h1",variant:"h5",children:a.t("authenticate:signUp")}),t.jsxs(f,{component:"form",noValidate:!0,sx:{mt:3},children:[t.jsxs(n,{container:!0,spacing:2,children:[t.jsxs(n,{item:!0,xs:12,children:[t.jsx(w,{required:!0,fullWidth:!0,id:"email",label:a.t("authenticate:email"),name:"email",autoComplete:"email",error:i.some(e=>e=="emailError"||e=="DuplicateEmail"),helperText:i.some(e=>e=="emailError")&&a.t("account:emailError"),onChange:e=>{c(i.filter(s=>!s.includes("email"))),d(s=>({...s,email:e.target.value}))}}),i.some(e=>e=="DuplicateEmail")&&t.jsx(B,{error:!0,children:a.t("account:duplicateEmail")})]}),t.jsx(n,{item:!0,xs:12,children:t.jsx(w,{required:!0,fullWidth:!0,name:"password",label:a.t("authenticate:password"),type:u?"text":"password",id:"password",autoComplete:"new-password",onChange:e=>d(s=>({...s,password:e.target.value})),error:i.some(e=>e=="passwordError"),helperText:i.some(e=>e=="passwordError")&&a.t("account:passwordError"),InputProps:{endAdornment:t.jsx(D,{position:"end",children:t.jsx(O,{"aria-label":"toggle password visibility",onClick:()=>y(!u),children:u?t.jsx(G,{}):t.jsx(H,{})})})}})})]}),t.jsx(n,{item:!0,xs:12,children:t.jsx(P,{control:t.jsx($,{color:"primary",onChange:()=>d(e=>({...e,marketingEmail:!l.marketingEmail}))}),label:t.jsx(g,{sx:{fontSize:14},children:a.t("authenticate:marketingEmail")})})}),t.jsx(V,{type:"button",onClick:v,disabled:C,fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:a.t("authenticate:signUp")}),t.jsx(n,{container:!0,justifyContent:"flex-end",children:t.jsx(n,{item:!0,children:t.jsx(A,{to:"/authenticate/signin",rel:"nofollow",style:{color:k.palette.primary.main},children:a.t("authenticate:signIn")})})})]})]})})};export{X as default};
